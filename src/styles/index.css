@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom styles */
html, body, #root { height: 100%; }
body { font-family: ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; overflow: auto }

/* Spinner */
.spinner {
	border-top-color: transparent;
	animation: spin 1s linear infinite;
}

@keyframes spin {
	to { transform: rotate(360deg); }
}

/* Smooth card and background transitions */
.backdrop-blur {
	transition: backdrop-filter 300ms ease, background-color 300ms ease;
}

/* Skeleton */
.skeleton {
	background: linear-gradient(90deg, rgba(255,255,255,0.06) 25%, rgba(255,255,255,0.12) 37%, rgba(255,255,255,0.06) 63%);
	background-size: 400% 100%;
	animation: shimmer 1.4s ease infinite;
}

@keyframes shimmer {
	0% { background-position: 100% 0 }
	100% { background-position: -100% 0 }
}

/* simple number flip/fade */
.num-fade { transition: transform .3s ease, opacity .3s ease }
.num-fade.enter { transform: translateY(-6px); opacity: 0 }
.num-fade.enter-active { transform: translateY(0); opacity: 1 }

/* Icon & card animations */
@keyframes spin-slow { to { transform: rotate(360deg) } }
@keyframes float { 0% { transform: translateY(0) } 50% { transform: translateY(-4px) } 100% { transform: translateY(0) } }
@keyframes rain-drop { 0% { transform: translateY(-4px); opacity: 0 } 30% { opacity: 1 } 100% { transform: translateY(8px); opacity: 0 } }
@keyframes pulse { 0% { transform: scale(1) } 50% { transform: scale(1.06) } 100% { transform: scale(1) } }

.icon-wrap { display: inline-block; cursor: pointer; }
.icon-sun .rays { transform-origin: center; animation: pulse 6s ease-in-out infinite; opacity: .9 }
.icon-sun:hover .rays { animation-duration: 3s; opacity: 1 }
.icon-cloud { animation: float 4s ease-in-out infinite }
.icon-rain .drop { animation: rain-drop 1.1s linear infinite; }
.icon-rain .drop:nth-child(2) { animation-delay: .25s }
.icon-rain .drop:nth-child(3) { animation-delay: .5s }
.icon-snow .flake { animation: float 3.5s ease-in-out infinite }
.icon-thunder .flash { animation: pulse .8s linear infinite }

.temp-breath { animation: pulse 3s ease-in-out infinite }

/* Card entry */
@keyframes card-in { from { opacity: 0; transform: translateY(8px) scale(.995) } to { opacity: 1; transform: translateY(0) scale(1) } }
.animate-card { animation: card-in .35s ease both }

/* Toast styles */
.toast-container { position: fixed; right: 1rem; top: 1rem; z-index: 60; display: flex; flex-direction: column; gap: .5rem }
.toast { background: rgba(15,23,42,0.95); color: #fff; padding: .6rem .9rem; border-radius: .5rem; box-shadow: 0 6px 18px rgba(2,6,23,0.2); min-width: 200px }
.toast.info { background: rgba(6,78,59,0.95) }
.toast.fade-in { animation: toast-in .25s ease both }
.toast.fade-out { animation: toast-out .25s ease both }

@keyframes toast-in { from { transform: translateY(-6px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
@keyframes toast-out { from { transform: translateY(0); opacity: 1 } to { transform: translateY(-8px); opacity: 0 } }

/* Dark mode variables (used by toggles) */
:root[data-theme='dark'] { --card-bg: rgba(10, 15, 23, 0.6); --text-primary: #e6eef8; --muted: #98a0b3 }

/* compact mode removed - compact-specific overrides deleted */

/* Modal overlay used for expanded day details; positioned above layout and doesn't cause page scroll */
.modal-overlay { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(2,6,23,0.5); z-index: 80 }
.modal-content { background: var(--card-bg, rgba(255,255,255,0.9)); color: var(--text-primary, #0b1220); border-radius: .75rem; padding: 1rem; width: min(720px, 96%); max-height: 86vh; box-shadow: 0 12px 40px rgba(2,6,23,0.35); overflow: hidden }
.modal-close { position: absolute; right: 1rem; top: 1rem; background: transparent; border: none; color: inherit; font-size: 1.1rem }

/* Themed small controls (unit toggles, save/share, compact/dark toggles)
	Provide smooth color transitions and adapt to data-theme (dark/light). */
.themed-btn { transition: background-color .22s ease, color .22s ease, border-color .22s ease, transform .12s ease; border: 1px solid rgba(15,23,42,0.06); }
.themed-btn:active { transform: translateY(1px) }

/* Theme toggle switch */
.theme-toggle {
	--w: 56px;
	--h: 30px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: var(--w);
	height: var(--h);
	padding: 4px;
	border-radius: 9999px;
	background: linear-gradient(90deg, rgba(255,255,255,0.6), rgba(255,255,255,0.6));
	position: relative;
	box-shadow: 0 1px 0 rgba(0,0,0,0.04), inset 0 1px 0 rgba(255,255,255,0.6);
	cursor: pointer;
}
.theme-toggle .icons { position: absolute; left: 8px; right: 8px; top: 4px; display:flex; align-items:center; justify-content:space-between; pointer-events:none }
.theme-toggle .icon { font-size: 14px; opacity: .95 }
.theme-toggle .knob { position: absolute; width: calc(var(--h) - 8px); height: calc(var(--h) - 8px); top: 4px; left: 4px; background: white; border-radius: 9999px; box-shadow: 0 6px 14px rgba(2,6,23,0.12); transition: transform .22s cubic-bezier(.2,.9,.2,1), background .15s }
.theme-toggle.dark { background: linear-gradient(90deg, rgba(17,24,39,0.9), rgba(30,41,59,0.9)); color: #f8fafc }
.theme-toggle.light { background: linear-gradient(90deg, rgba(255,255,255,0.95), rgba(246,247,250,0.95)); color: #0f172a }
.theme-toggle.dark .knob { transform: translateX(calc(var(--w) - var(--h))); background: linear-gradient(180deg,#0f172a,#0b1220); }
.theme-toggle.light .knob { transform: translateX(0); background: white }

@media (hover: none) and (pointer: coarse) {
	.theme-toggle { --w: 64px; --h: 34px }
}

:root[data-theme='light'] .themed-btn { background: rgba(255,255,255,0.6); color: #0b1220; border-color: rgba(2,6,23,0.06) }
:root[data-theme='dark'] .themed-btn { background: rgba(2,6,23,0.6) !important; color: #e6eef8 !important; border-color: rgba(255,255,255,0.06) !important }

/* Slightly stronger pressed state */
:root[data-theme='light'] .themed-btn:hover { background: rgba(255,255,255,0.8) }
:root[data-theme='dark'] .themed-btn:hover { background: rgba(255,255,255,0.06) }

/* Scroll indicator shadows for horizontal scrollers */
.scroller-wrap { position: relative }
.scroller-shadow-left, .scroller-shadow-right { position: absolute; top: 0; bottom: 0; width: 3.5rem; pointer-events: none; z-index: 10 }
.scroller-shadow-left { left: 0; background: linear-gradient(90deg, rgba(2,6,23,0.7), rgba(2,6,23,0)); }
.scroller-shadow-right { right: 0; background: linear-gradient(270deg, rgba(2,6,23,0.7), rgba(2,6,23,0)); }
.scroller-arrow { position: absolute; top: 50%; transform: translateY(-50%); z-index: 20; width: 2rem; height: 2rem; display: inline-flex; align-items: center; justify-content: center; border-radius: 9999px; background: rgba(255,255,255,0.85); box-shadow: 0 6px 18px rgba(2,6,23,0.15); }
.scroller-arrow.left { left: 0.5rem }
.scroller-arrow.right { right: 0.5rem }
.scroller-arrow:active { transform: translateY(-50%) scale(.98) }

/* Header background that adapts to theme to avoid a bright rectangle in dark mode */
.header { transition: background-color .22s ease, border-color .22s ease; border-color: rgba(2,6,23,0.06) }
:root[data-theme='light'] .header { background: rgba(255,255,255,0.8); color: #0b1220; border-color: rgba(2,6,23,0.06) }
:root[data-theme='dark'] .header { background: transparent; color: #e6eef8; border-color: rgba(255,255,255,0.02); box-shadow: none }

/* Control group (unit toggles etc.) should adapt too */
.control-group { transition: background-color .22s ease, color .22s ease }
:root[data-theme='light'] .control-group { background: rgba(255,255,255,0.6); color: #0b1720 }
:root[data-theme='dark'] .control-group { background: rgba(255,255,255,0.03); color: #e6eef8 }
/* Softer shadow in dark mode so the control group blends with header */
.control-group.shadow-sm { box-shadow: 0 6px 18px rgba(2,6,23,0.06) }
:root[data-theme='dark'] .control-group.shadow-sm { box-shadow: 0 4px 10px rgba(2,6,23,0.08) }

/* Inner rounded header card that contains title and controls */
.header-inner { width: 100%; display: flex; align-items: center; justify-content: space-between }
:root[data-theme='light'] .header-inner { background: rgba(255,255,255,0.6); border: 1px solid rgba(2,6,23,0.06); }
:root[data-theme='dark'] .header-inner { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.02); box-shadow: 0 6px 18px rgba(2,6,23,0.06) }
.header-inner h1 { margin: 0 }

